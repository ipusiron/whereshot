# WhereShot ユーザーガイド

**撮影時刻・場所解析ツール（Capture Time & Place Analyzer）**

このガイドでは、WhereShotの基本的な使用方法から高度な機能まで、詳しく説明します。

---

## 📖 目次

1. [はじめに](#はじめに)
2. [基本的な使い方](#基本的な使い方)
3. [詳細機能](#詳細機能)
4. [外部データ連携](#外部データ連携)
5. [OSINT調査での活用](#osint調査での活用)
6. [トラブルシューティング](#トラブルシューティング)
7. [よくある質問](#よくある質問)

---

## 🚀 はじめに

WhereShotは、画像や動画から「いつ・どこで撮られたか？」を解析するためのOSINT（オープンソースインテリジェンス）支援ツールです。

### 特徴
- **完全ローカル処理**: 画像データは外部に送信されません
- **多角的解析**: Exif情報、太陽位置、地図表示を組み合わせた検証
- **直感的なUI**: ドラッグ&ドロップで簡単操作
- **外部データ連携**: 衛星画像、気象データとの照合が可能

---

## 🎯 基本的な使い方

### ステップ1: 画像のアップロード

1. **ドラッグ&ドロップ**: 画像ファイルを画面中央のアップロードエリアにドラッグ
2. **ファイル選択**: 「ファイルを選択」ボタンをクリックしてファイルを選択

**対応形式**: JPEG, PNG, TIFF, MP4（最大100MB）

### ステップ2: Exif情報の確認

アップロード後、以下の情報が自動的に抽出・表示されます：

- **📅 撮影日時**: 画像に記録された撮影日時
- **📍 GPS位置**: 撮影地点の座標（緯度・経度）
- **📷 カメラ情報**: 使用されたカメラとレンズ
- **⚙️ 撮影設定**: ISO、絞り、シャッター速度など

### ステップ3: 地図での位置確認

GPS情報が含まれている場合：
- 撮影地点が地図上に自動表示されます
- マーカーをドラッグして位置を調整可能
- 地図レイヤー（通常/衛星/地形）を切り替え可能

GPS情報がない場合：
- 「手動で位置指定」ボタンをクリック
- 地図上をクリックして推定位置を設定

### ステップ4: 太陽位置計算

1. 撮影地点と日時が設定されていることを確認
2. 「計算実行」ボタンをクリック
3. 以下の情報が表示されます：
   - **☀️ 太陽高度**: 地平線からの角度
   - **🧭 太陽方位**: 北を基準とした方角
   - **🌅 時間帯**: 朝・昼・夕方の判定

---

## 🔧 詳細機能

### 撮影方向の設定

影の方向や背景の建物から撮影方向を特定できます：

1. 「撮影方向を設定」ボタンをクリック
2. 地図上で撮影した方向をクリック
3. 撮影地点から指定点への方向線が表示されます

### 地図操作

- **ズーム**: マウスホイールまたは+/-ボタン
- **移動**: 地図をドラッグ
- **レイヤー切り替え**: 右上のコントロールで地図種類を変更
- **座標表示**: 地図下部に現在のカーソル位置の座標が表示

### GPS精度円

GPS情報に精度データが含まれている場合、撮影地点周辺に精度円が表示されます。これにより、実際の撮影位置の誤差範囲を視覚的に確認できます。

---

## 🌐 外部データ連携

WhereShotは外部サービスとの連携により、より詳細な検証が可能です。

### NASA Worldview
- **用途**: 衛星画像、気象データの確認
- **情報**: 雲の状況、大気の状態、自然災害の影響など
- **アクセス**: 撮影日時・場所に基づいて自動的にリンクを生成

### 地理院地図
- **標準地図**: 道路、建物、地形の詳細情報
- **空中写真**: 過去の航空写真との比較が可能
- **用途**: 周辺環境の変化、建物の建設時期の確認

### 気象庁 過去の天気
- **用途**: 撮影日の天候確認
- **情報**: 降水量、気温、風向・風速
- **検証**: 画像の天候条件との整合性チェック

### Google Street View
- **用途**: 地上からの視点での環境確認
- **活用**: 撮影アングルや背景の建物との照合

---

## 🔍 OSINT調査での活用

### フェイクニュース検出

1. **メタデータ確認**: 撮影日時と報道日時の整合性
2. **位置検証**: 報道された場所との位置情報の照合
3. **気象条件**: 撮影日の天候と画像の状況の一致確認
4. **太陽位置**: 影の方向から撮影時刻の妥当性を検証

### 画像の真偽判定

- **時系列分析**: 複数画像の撮影時刻の論理的整合性
- **地理的整合性**: 短時間での移動距離の物理的可能性
- **環境証拠**: 衛星画像や気象データとの照合

### 証拠保全

- **メタデータ保存**: 重要な情報のスクリーンショット取得
- **検証プロセス記録**: 分析手順の文書化
- **外部データ収集**: 関連する衛星画像や気象データの保存

---

## 🛠️ トラブルシューティング

### 画像がアップロードできない

**原因と対処法**:
- ファイルサイズが100MBを超えている → ファイルサイズを圧縮
- 非対応形式 → JPEG, PNG, TIFF, MP4形式に変換
- ブラウザの制限 → ページを再読み込み、別ブラウザで試行

### Exif情報が表示されない

**考えられる原因**:
- SNSやメッセージアプリ経由の画像（メタデータが削除済み）
- スクリーンショットや編集済み画像
- 古いカメラやデバイスで撮影された画像

**対策**:
- 元の画像ファイルを入手
- 手動で位置情報を設定して分析継続

### 地図が表示されない

**対処法**:
- インターネット接続を確認
- ブラウザの JavaScript が有効か確認
- ページを再読み込み
- 別のブラウザで試行

### 太陽位置計算がエラーになる

**確認事項**:
- 撮影位置が正しく設定されているか
- 解析日時が入力されているか
- 日時の形式が正しいか（YYYY-MM-DD HH:MM）

---

## ❓ よくある質問

### Q1: アップロードした画像は外部に送信されますか？
**A**: いいえ。すべての処理はブラウザ内で行われ、画像やメタデータが外部サーバーに送信されることはありません。

### Q2: どの程度の精度で位置を特定できますか？
**A**: GPS精度に依存しますが、一般的に数メートル～数十メートルの誤差範囲です。GPS情報がない場合は、周辺情報から手動で推定する必要があります。

### Q3: 古い画像でも解析できますか？
**A**: Exif情報が保持されていれば可能です。ただし、デジタルカメラが普及する以前（2000年代前半以前）の画像には通常Exif情報が含まれていません。

### Q4: 動画ファイルも解析できますか？
**A**: MP4形式の動画ファイルに対応していますが、静止画に比べてメタデータが限られる場合があります。

### Q5: 法執行機関での利用は可能ですか？
**A**: 技術的には可能ですが、法的証拠として使用する場合は、適切な証拠保全手順と専門家による検証が必要です。

### Q6: 商用利用は可能ですか？
**A**: MIT Licenseの下で公開されているため、商用利用も可能です。ただし、ライセンス条項を遵守してください。

---

## 📞 サポート・問い合わせ

- **GitHub Issues**: [問題報告・機能要望](https://github.com/ipusiron/osm-infra-viewer/issues)
- **作者ブログ**: [akademeia.info](https://akademeia.info/)
- **X（Twitter）**: [@ipusiron](https://x.com/ipusiron)

---

## 📚 関連資料

- [API仕様書](api-reference.md)
- [使用例・サンプル](examples/)
- [OSINT調査手法について](https://akademeia.info/) （作者ブログ）

---

**⚠️ 免責事項**
本ツールはOSINT調査の支援を目的としており、プライバシー侵害や不正な監視活動での使用は意図されていません。適用される法律と倫理的ガイドラインを遵守してご利用ください。